
ALTER PROCEDURE SP_SET_DICCIONARIO_CLIENTE
@ID_CLIENTE VARCHAR(30),
@PALABRA_DIC VARCHAR (30),
@RELACION VARCHAR(30),
@EXCEPCION VARCHAR (30)

AS
BEGIN TRY
BEGIN TRAN

IF EXISTS(SELECT * FROM TBL_DICCIONARIO WHERE ID_CLIENTE = @ID_CLIENTE AND HOMONOGAMO =@PALABRA_DIC)
BEGIN
PRINT 'EXISTE, NO GUARDA NADA EN LA TABLA DICCIONARIO Y EN NADA'

IF EXISTS(SELECT * FROM TBL_DICCIONARIO_HOMONOGAMO WHERE HOMONOGAMO =@PALABRA_DIC) 
BEGIN
--SI EXISTE EN LA TABLA DIC_HOMO SOLO SE MODIFICA
UPDATE TBL_DICCIONARIO_HOMONOGAMO SET HOMONOGAMO=@PALABRA_DIC , RELACION = @RELACION , EXCEPCION = @EXCEPCION WHERE HOMONOGAMO =  @PALABRA_DIC;--NO HARIA NADA
PRINT 'SE MODIFICO INFORMACION EN LA TABLA DIC_HOMO NO MODIFICADIA SOLO GUARDARIA ASI NO SE DAÑA INFO'
END
ELSE
BEGIN
INSERT INTO TBL_DICCIONARIO_HOMONOGAMO VALUES (@PALABRA_DIC,@RELACION,@EXCEPCION);
PRINT 'SE INSERTA INFORMACION EN LA TABLA DIC_HOMO'
END--SEGUNDO IF

--PRIMER IF
END
ELSE
BEGIN

PRINT 'NO EXISTE SE GUARDA EN LA TABLA DICCIONARIO LA INFORMACION'
INSERT INTO TBL_DICCIONARIO VALUES (@ID_CLIENTE,@PALABRA_DIC)


IF EXISTS(SELECT * FROM TBL_DICCIONARIO_HOMONOGAMO WHERE HOMONOGAMO =@PALABRA_DIC) 
BEGIN
--SI EXISTE EN LA TABLA DIC_HOMO SOLO SE MODIFICA
UPDATE TBL_DICCIONARIO_HOMONOGAMO SET HOMONOGAMO=@PALABRA_DIC , RELACION = @RELACION , EXCEPCION = @EXCEPCION WHERE HOMONOGAMO =  @PALABRA_DIC;--NO HARIA NADA
PRINT 'SE MODIFICO INFORMACION EN LA TABLA DIC_HOMO'
END
ELSE
BEGIN
INSERT INTO TBL_DICCIONARIO_HOMONOGAMO VALUES (@PALABRA_DIC,@RELACION,@EXCEPCION);
PRINT 'SE INSERTA INFORMACION EN LA TABLA DIC_HOMO'
END--SEGUNDO IF


END--FIN IF PRIMERO

COMMIT
END TRY
BEGIN CATCH
ROLLBACK
PRINT ERROR_MESSAGE()
END CATCH
